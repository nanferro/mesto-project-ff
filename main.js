(()=>{"use strict";function e(e,t,r,n){var o=document.querySelector("#card-template").content.cloneNode(!0).querySelector(".card"),p=o.querySelector(".card__image"),u=o.querySelector(".card__title"),c=o.querySelector(".card__delete-button"),i=o.querySelector(".card__like-button");return p.src=e.link,u.textContent=e.name,p.alt=e.name,c.addEventListener("click",(function(){return t(o)})),i.addEventListener("click",r),p.addEventListener("click",(function(){return n(e.link,e.name)})),o}function t(e){e.remove()}function r(e){e.target.classList.toggle("card__like-button_is-active")}function n(e){e.classList.add("popup_is-opened","popup_is-animated"),document.addEventListener("keydown",p)}function o(e){e.classList.remove("popup_is-opened","popup_is-animated"),document.removeEventListener("keydown",p)}function p(e){if("Escape"===e.key){var t=document.querySelector(".popup_is-opened");t&&o(t)}}function u(e){e.addEventListener("click",(function(t){if(t.target===e){o(e);var r=e.querySelector(".popup__form");r&&r.reset()}}))}var c=document.querySelector(".popup__form"),i=function(e,t,r){var n=e.querySelector("#".concat(t.id," + .popup__input-error"));n&&(n.classList.add("popup__input_type_error"),n.textContent=r,n.classList.add("popup__input-error_active"))},a=function(e,t){var r=e.querySelector("#".concat(t.id," + .popup__input-error"));r&&(r.classList.remove("popup__input_type_error"),r.classList.remove("popup__input-error_active"),r.textContent="")},l=function(e,t){e.some((function(e){return!e.validity.valid}))?(t.disabled=!0,t.classList.add("button_inactive")):(t.disabled=!1,t.classList.remove("button_inactive"))};document.querySelector(".profile__image").style.backgroundImage="url(".concat("6666407ac3aa5af1d5de.jpg",")");var d=document.querySelector(".places__list"),s=document.querySelector(".profile__edit-button"),_=document.querySelector(".popup_type_edit"),y=document.querySelector(".profile__add-button"),m=document.querySelector(".popup_type_new-card"),f=document.querySelectorAll(".popup__close"),v=document.querySelector(".popup_type_image"),S=document.querySelector('.popup__form[name="edit-profile"]'),q=S.querySelector(".popup__input_type_name"),k=S.querySelector(".popup__input_type_description"),L=document.querySelector(".profile__title"),g=document.querySelector(".profile__description"),h=document.querySelector(".popup__form[name='new-place']"),b=h.querySelector(".popup__input_type_card-name"),E=h.querySelector(".popup__input_type_url"),x=document.querySelector(".popup__image"),A=document.querySelector(".popup__caption");function C(e){var t=Array.from(e.querySelectorAll(".popup__input"));t.forEach((function(t){return a(e,t)})),l(t,e.querySelector(".popup__button"))}function j(e,t){x.src=e,x.alt=t,A.textContent=t,n(v)}Array.from(document.querySelectorAll(".popup__form")).forEach((function(e){!function(e){var t=Array.from(e.querySelectorAll(".popup__input")),r=e.querySelector(".popup__button");l(t,r),t.forEach((function(n){n.addEventListener("input",(function(){!function(e,t){t.validity.valueMissing?i(e,t,"Вы пропустили это поле."):t.validity.typeMismatch&&"url"===t.type?i(e,t,"Введите адрес сайта."):t.validity.patternMismatch?i(e,t,"Можно использовать только буквы, дефисы и пробелы."):t.validity.tooShort?i(e,t,"Минимальное количество символов: ".concat(t.minLength,". Длина текста сейчас: ").concat(t.value.length," символов.")):a(e,t)}(e,n),l(t,r)}))}))}(e)})),s.addEventListener("click",(function(){q.value=L.textContent,k.value=g.textContent,C(c),n(_)})),y.addEventListener("click",(function(){C(c),n(m);var e=Array.from(h.querySelectorAll(".popup__input")),t=h.querySelector(".popup__button");l(e,t)})),f.forEach((function(e){e.addEventListener("click",(function(){var t=e.closest(".popup");o(t),t===m&&h.reset()}))})),u(_),u(m),u(v),S.addEventListener("submit",(function(e){e.preventDefault();var t=q.value,r=k.value;L.textContent=t,g.textContent=r,o(_)})),h.addEventListener("submit",(function(n){n.preventDefault();var p=Array.from(h.querySelectorAll(".popup__input")),u=e({name:b.value,link:E.value},t,r,j);d.prepend(u),h.reset(),o(m);var c=h.querySelector(".popup__button");l(p,c)})),h.addEventListener("reset",(function(){var e=Array.from(h.querySelectorAll(".popup__input")),t=h.querySelector(".popup__button");e.forEach((function(e){return a(h,e)})),l(e,t)})),[{name:"Архыз",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/arkhyz.jpg"},{name:"Челябинская область",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/chelyabinsk-oblast.jpg"},{name:"Иваново",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/ivanovo.jpg"},{name:"Камчатка",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kamchatka.jpg"},{name:"Холмогорский район",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kholmogorsky-rayon.jpg"},{name:"Байкал",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/baikal.jpg"}].forEach((function(n){var o=e(n,t,r,j);d.append(o)}))})();